<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>日程表</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="card">
        <h1>日程表</h1>
        <div id="statusIndicator">保存しました</div>

        <div class="file-controls">
            <div class="project-name-group">
                <span>計画名：</span>
                <input type="text" id="projectNameInput" value="標準の計画" />
            </div>

            <div style="flex-grow:1"></div>
            <button id="downloadBtn" class="btn-secondary" type="button">💾 ファイルに保存</button>
            <button id="clearAllBtn" class="btn-secondary" type="button">✨ 新規開始</button>
            <button id="uploadBtn" class="btn-secondary" type="button">📂 ファイルを開く</button>
            <input type="file" id="fileInput" accept=".json" />
        </div>

        <div class="top-bar">
            <div class="top-left">
                <button id="addRowBtn" class="btn-primary" type="button">＋ 行を追加</button>
                <label class="toggle-hidden-label">
                    <input type="checkbox" id="showHiddenCheck"> 非表示行を表示する
                </label>
            </div>
            <div class="top-right">
                <span id="rangeLabel"></span>
                <button id="settingsButton" class="settings-button" type="button" aria-label="表示設定">≡</button>
            </div>
        </div>

        <div class="mode-bar">
            <span class="label">モード：</span>
            <button id="modePlan" class="mode-btn mode-active" type="button">計画</button>
            <button id="modeProgress" class="mode-btn" type="button">進捗</button>
        </div>

        <div class="move-bar">
            <div class="move-group">
                <span>選択区間：</span>
                <button id="segMinus1d" class="chip-btn" type="button">-1日</button>
                <button id="segPlus1d" class="chip-btn" type="button">+1日</button>
                <button id="segMinus1w" class="chip-btn" type="button">-1週</button>
                <button id="segPlus1w" class="chip-btn" type="button">+1週</button>
            </div>
            <div class="move-group">
                <span>端を伸縮：</span>
                <button id="segStartMinus1d" class="chip-btn" type="button">開始 -1日</button>
                <button id="segStartPlus1d" class="chip-btn" type="button">開始 +1日</button>
                <button id="segEndMinus1d" class="chip-btn" type="button">終了 -1日</button>
                <button id="segEndPlus1d" class="chip-btn" type="button">終了 +1日</button>
            </div>
            <div class="move-group">
                <span>行全体：</span>
                <button id="rowMinus1d" class="chip-btn" type="button">-1日</button>
                <button id="rowPlus1d" class="chip-btn" type="button">+1日</button>
            </div>
        </div>

        <div id="gantt">
            <div class="gantt-inner">
                <div class="gantt-left">
                    <div class="left-header">
                        <div></div>
                        <div>項目1</div>
                        <div>項目2</div>
                        <div>見積</div>
                    </div>
                    <div id="leftRows" class="left-rows"></div>
                    <div class="left-footer-placeholder">合計</div>
                </div>
                <div class="gantt-right" id="ganttRight">
                    <div class="header-row" id="headerRow"></div>
                    <div class="rows" id="rowsContainer"></div>
                    <div id="totalRow" class="total-row"></div>
                </div>
            </div>
        </div>

        <div class="free-memo-area">
            <div class="free-memo-label">メモ・備考</div>
            <div id="freeMemo" contenteditable="true"></div>
        </div>
    </div>

    <div id="settingsPanel" class="settings-panel settings-hidden">
        <div class="settings-content">
            <h2>表示設定</h2>
            <label>開始日 <input id="settingsStartDate" type="date" /></label>
            <label>終了日 <input id="settingsEndDate" type="date" /></label>
            <label>会社休日 (YYYY-MM-DD)<textarea id="settingsHolidays"
                    placeholder="2025-01-01, 2025-12-31"></textarea></label>
            <div class="settings-buttons">
                <button id="settingsCancel" class="btn-secondary" type="button">キャンセル</button>
                <button id="settingsSave" class="btn-primary" type="button">保存</button>
            </div>
        </div>
    </div>

    <div id="contextMenu" class="context-menu">
        <div class="menu-item" id="cmComplete">✅ 完了/未完了の切り替え</div>
        <div class="menu-item" id="cmHide">👁️ 行を非表示にする</div>
        <div class="menu-item" id="cmUnhide" style="display:none;">👁️ 行を表示する</div>
        <div class="menu-separator"></div>
        <div class="menu-item delete" id="cmDelete">🗑️ 行を削除</div>
    </div>

    <script src="script.js"></script>
</body>

</html>